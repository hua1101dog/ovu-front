<div id="angularId" ng-controller="workunitTjParkCtl" >
    <div class="page-title">
      <div class="title_left">
        <h3>工单统计</h3>
      </div>
    </div>
  
      <div class="x_panel" >
        <div class="form-inline">
          <div class="form-group">
            <label>所在部门</label>
            <div class="input-group ">
                <tree-selector node-list="searchDeptTree" host="search"
                               host-key="'subDeptId'" host-text="'subDeptName'" leaf-only=false tip-text="'请选择部门'"></tree-selector>
            </div>
          </div>
          <div class="form-group">
            <label>员工姓名</label>
            <input type="text" class="form-control" name="personName" ng-model="search.personName" />
          </div>
          <div class="form-group">
            <label>执行时间</label>
            <input type="datetime" class="form-control Wdate"  ng-model="search.startTime"  placeholder="开始日期" onchange=""
                   onclick="javascript:WdatePicker({dateFmt:'yyyy-MM-dd',maxDate:&quot;#F{$('.Wdate').last().val()}&quot;})">
            <label>-</label>
            <input type="datetime" class="form-control Wdate"  ng-model="search.endTime"  placeholder="结束日期" onchange=""
                   onclick="javascript:WdatePicker({dateFmt:'yyyy-MM-dd',maxDate:'%y-%M-#{%d-1}',minDate:&quot;#F{$('.Wdate').first().val()}&quot;})">
          </div>
            <button class="btn btn-default" ng-click="find(1)" >查询</button>
            <button class="btn btn-primary" ng-click="export()" >导出</button>
        </div>
      </div>
  
      <div class="panel panel-default" style="display: grid;">
        <div class="panel-body" style="overflow: auto;">
          <table class="table table-hover text-left" style="margin-top: 10px">
            <thead>
            <tr align="center">
              <th class="text-center" style="vertical-align: middle" rowspan="2">NO</th>
              <th  style="vertical-align: middle" rowspan="2" nowrap="nowrap">员工姓名</th>
              <th  style="vertical-align: middle;width: 200px" rowspan="2" nowrap="nowrap">部门</th>
              <th class="text-center" style="vertical-align: middle" rowspan="2" nowrap="nowrap">总完成率</th>
              <th class="text-center" colspan="6" nowrap="nowrap">计划工单</th>
              <th class="text-center" colspan="8" nowrap="nowrap">应急工单</th>
            </tr>
            <tr align="center">
              <th class="text-center" nowrap="nowrap">执行工单量</th>
              <th class="text-center" nowrap="nowrap">未接单</th>
              <th class="text-center" nowrap="nowrap">已接单</th>
              <th class="text-center" nowrap="nowrap">已执行</th>
              <th class="text-center" nowrap="nowrap">已评价</th>
              <th class="text-center" nowrap="nowrap">工单完成率</th>
              <th class="text-center" nowrap="nowrap">执行工单量</th>
              <th class="text-center" nowrap="nowrap">发起工单量</th>
              <th class="text-center" nowrap="nowrap">自发单</th>
              <th class="text-center" nowrap="nowrap">未接单</th>
              <th class="text-center" nowrap="nowrap">已接单</th>
              <th class="text-center" nowrap="nowrap">已执行</th>
              <th class="text-center" nowrap="nowrap">已评价</th>
              <th class="text-center" nowrap="nowrap">工单完成率</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-if="pageModel.data.length == 0">
              <td colspan="100" class="text-center">暂无记录</td>
            </tr>
            <tr ng-repeat="item in pageModel.data">
              <td class="text-center">{{$index +1+pageModel.pageSize*pageModel.pageIndex}}
              </td>
              <td>{{item.name}}</td>
              <td>{{item.deptName}}</td>
              <td>{{item.zWcl}}</td>
              <td class="text-center">{{item.jhGdl}}</td>
              <td class="text-center">{{item.jhWjd}}</td>
              <td class="text-center">{{item.jhYjd}}</td>
              <td class="text-center">{{item.jhYzx}}</td>
              <td class="text-center">{{item.jhYpj}}</td>
              <td class="text-center">{{item.jhWcl}}</td>
              <td class="text-center">{{item.yjGdl}}</td>
              <td class="text-center">{{item.yjBsl}}</td>
              <td class="text-center">{{item.yjZfl}}</td>
              <td class="text-center">
                  <span ng-if="item.yjWjd>0">
                      <a href='javascript:void(0)' ng-click="detail(item,'未接单')" class='btn-link' >{{item.yjWjd}}</a>
                  </span>
                  <span ng-if="item.yjWjd==0">
                      {{item.yjWjd}}
                  </span>
              </td>
              <td class="text-center">
                  <span ng-if="item.yjYjd>0">
                      <a href='javascript:void(0)' ng-click="detail(item,'已接单')" class='btn-link' >{{item.yjYjd}}</a>
                  </span>
                  <span ng-if="item.yjYjd==0">
                      {{item.yjYjd}}
                  </span>
              </td>
              <td class="text-center">{{item.yjYzx}}</td>
              <td class="text-center">{{item.yjYpj}}</td>
              <td class="text-center">{{item.yjWcl}}</td>
            </tr>
            </tbody>
          </table>
          <div class="page-footer clearfix">
            <ng-include src="'/common/pager.html'"></ng-include>
          </div>
        </div>
      </div>
  
  </div>
  